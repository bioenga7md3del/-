@import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap');

:root {
    --primary: #0056b3; --secondary: #2c3e50; --bg: #f0f2f5;
    --text-color: #333; --success: #27ae60; --danger: #c0392b; --warning: #f39c12;
    --card-bg: #ffffff; --border-radius: 12px;
}

body { font-family: 'Tajawal', sans-serif; background-color: var(--bg); margin: 0; padding: 0; color: var(--text-color); font-size: 13px; }

/* --- Navigation --- */
.navbar {
    background: white; padding: 0 25px; height: 65px;
    display: flex; justify-content: space-between; align-items: center;
    box-shadow: 0 2px 15px rgba(0,0,0,0.04); position: sticky; top: 0; z-index: 1000;
}
.nav-brand { font-weight: 800; font-size: 18px; color: var(--primary); display: flex; align-items: center; gap: 10px; }
.nav-brand img { height: 40px; }
.nav-links { display: flex; gap: 10px; }
.nav-item { 
    padding: 10px 15px; cursor: pointer; font-weight: 600; color: #666; border-radius: 8px; transition: 0.3s;
}
.nav-item:hover { background: #f0f7ff; color: var(--primary); }
.nav-item.active { background: var(--primary); color: white; }

/* --- Admin Only Tabs (Hidden by default) --- */
.restricted-tab { display: none; } 

/* --- Main Content --- */
.main-content { padding: 25px; max-width: 1400px; margin: 0 auto; }
.page-section { display: none; animation: fadeIn 0.4s ease; }
.page-section.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* --- Modern Header --- */
.section-header { 
    display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;
}
.section-title h2 { margin: 0; font-size: 24px; color: var(--secondary); font-weight: 800; }

/* --- Modern Card Grid (بديل الجدول) --- */
.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
}

.data-card {
    background: var(--card-bg); border-radius: var(--border-radius);
    padding: 20px; position: relative;
    box-shadow: 0 5px 15px rgba(0,0,0,0.03); border: 1px solid #eee;
    transition: transform 0.3s, box-shadow 0.3s;
}
.data-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.08); border-color: var(--primary); }

.card-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px; border-bottom: 1px solid #f0f0f0; padding-bottom: 10px; }
.card-title { font-size: 16px; font-weight: 800; color: var(--secondary); }
.card-subtitle { font-size: 12px; color: #777; margin-top: 2px; }

.card-body { margin-bottom: 15px; }
.card-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px; }
.card-label { color: #888; font-weight: bold; }
.card-value { color: #333; font-weight: 600; }

.card-actions { display: flex; gap: 8px; justify-content: flex-end; }

/* --- KPI Table (للرئيسية فقط) --- */
.table-wrapper { overflow-x: auto; background: white; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.03); }
table { width: 100%; border-collapse: separate; border-spacing: 0; min-width: 1400px; }
thead th { background: var(--secondary); color: white; padding: 12px; position: sticky; top: 0; z-index: 100; font-size: 13px; }
td { padding: 8px; text-align: center; border-bottom: 1px solid #eee; vertical-align: middle; }

/* Sticky Columns */
.sticky-col-1 { position: sticky; right: 0; z-index: 50; background: #fdfdfd; border-left: 2px solid #ddd; min-width: 160px; font-weight: bold; }
.sticky-col-2 { position: sticky; right: 160px; z-index: 49; background: #fff; border-left: 1px solid #eee; min-width: 90px; }
.sticky-col-3 { position: sticky; right: 250px; z-index: 50; background: #fdfdfd; border-left: 1px solid #eee; min-width: 140px; box-shadow: -5px 0 10px rgba(0,0,0,0.05); }
thead th:nth-child(1) { right: 0; z-index: 110; min-width: 160px; }
thead th:nth-child(2) { right: 160px; z-index: 110; min-width: 90px; }
thead th:nth-child(3) { right: 250px; z-index: 110; min-width: 140px; }

/* Row Colors */
tr.row-medical td { background-color: #f6fbff; }
tr.row-non-medical td { background-color: #fffcf5; }

/* Status */
.status-ok { color: var(--success); font-size: 18px; }
.status-late { color: var(--danger); font-size: 18px; }
.status-returned { color: var(--warning); font-size: 18px; cursor: help; }

/* Badges & Tags */
.contract-tag { padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: bold; }
.tag-med { background: #e3f2fd; color: var(--primary); }
.tag-non { background: #fff3cd; color: #d35400; }

.badge { padding: 2px 8px; border-radius: 6px; font-size: 12px; font-weight: bold; color: white; }
.badge-red { background: var(--danger); }
.badge-green { background: var(--success); }

/* Dashboard Stats */
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 25px; }
.stat-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.03); text-align: center; border-bottom: 4px solid var(--primary); }
.stat-number { font-size: 28px; font-weight: 800; color: var(--secondary); display: block; }
.stat-label { font-size: 12px; color: #888; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }

/* Admin Controls & Filters */
.admin-panel { background: white; padding: 15px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.03); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
.admin-controls { display: none; gap: 8px; }
.toolbar-section { background: white; padding: 15px; border-radius: 12px; margin-bottom: 20px; display: flex; gap: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.02); flex-wrap: wrap; }

button { padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-family: 'Tajawal'; font-weight: bold; font-size: 12px; transition: 0.2s; display: inline-flex; align-items: center; gap: 5px; }
button:hover { transform: translateY(-2px); opacity: 0.9; }
.btn-primary { background: var(--primary); color: white; }
.btn-danger { background: var(--danger); color: white; }
.btn-success { background: var(--success); color: white; }
.btn-warning { background: var(--warning); color: #333; }
.btn-purple { background: #8e44ad; color: white; }
.btn-icon { padding: 5px 10px; font-size: 14px; }

/* Modals */
.modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(4px); }
.modal-content { background: white; width: 95%; max-width: 550px; padding: 0; border-radius: 12px; box-shadow: 0 15px 30px rgba(0,0,0,0.2); overflow: hidden; animation: slideUp 0.3s ease; }
@keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.modal-header { padding: 15px 20px; background: var(--secondary); color: white; display: flex; justify-content: space-between; align-items: center; }
.modal-body { padding: 25px; max-height: 70vh; overflow-y: auto; }
.modal-footer { padding: 15px 20px; background: #f9f9f9; text-align: left; display: flex; justify-content: flex-end; gap: 10px; }
.form-control { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-family: 'Tajawal'; box-sizing: border-box; font-size: 14px; }
.form-group { margin-bottom: 15px; }
.form-group label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; }

/* Helpers */
.hidden { display: none !important; }
.super-admin-only { display: none; }
#toast { visibility: hidden; background: #333; color: white; padding: 10px 25px; border-radius: 50px; position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 3000; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
#toast.show { visibility: visible; bottom: 50px; opacity: 1; }

@media (max-width: 768px) {
    .nav-links { display: none; } /* يمكن إضافة قائمة هامبرغر لاحقاً */
    .sticky-col-2, .sticky-col-3, thead th:nth-child(2), thead th:nth-child(3) { position: static !important; box-shadow: none !important; }
}
@media print {
    .navbar, .admin-panel, .btn-print, #loginSection, .modal-overlay, .toolbar-section, .card-actions { display: none !important; }
    .container { box-shadow: none; padding: 0; width: 100%; }
    .page-section { display: none; }
    #dashboard-view { display: block; }
    .dashboard-container { display: none; } /* إخفاء الكروت الكبيرة عند الطباعة للتركيز على الجدول */
    th, td { border: 1px solid #000 !important; font-size: 9px !important; padding: 2px !important; color: black !important; }
    .sticky-col-1 { position: static !important; }
    @page { size: landscape; margin: 5mm; }
}
